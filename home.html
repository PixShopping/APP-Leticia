<!DOCTYPE html>
<html lang="pt-BR">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link rel="icon" href="./imagem/icon.png" type="x-icon">
		<link type="stylesheet" src="./style.css">
		<title> Let√≠cia </title>
		      
		<style scoped>

			:root {
				/* Cores do aplicativo */
				--one: #002242;
				--two: #144774;
				--tree: #336FA5;
				--four: #4E8BB8;
				--five: #6FADD2;
				--six: #9ECAE3;
                --gray: #b3abab;
			}
			
			*  {
				padding: 0px;
				margin: 0px;
				box-sizing: border-box;
			}
			
			body {
				background: white;
				color: var(--one);
				user-select: none;
				font-family: 'Arial', sans-serif;
				overflow-x: hidden;
            }

            .container {
                width: 100vw;
                height: auto;
                display: flex;
                flex-direction: column;
            }

            .bem-vindo {
                width: 100%;
                height: 250px;
                padding: 20px;
                border-radius: 25px;
                background: #144774;
                color: white;
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: center;
                box-shadow: 0px 5px 20px var(--one);
            }

            .bem-vindo ion-icon {
                font-size: 55px;
                margin: 0px;
            }

            .bem-vindo h1 {
                margin: 10px 0px 0px 0px;
                font-size: 22px;
                font-weight: 700;
                display: flex;
            }

            .bem-vindo h1 p {
                font-weight: 700;
                margin: 0px 0px 0px 10px;
            }

            .bem-vindo h2 {
                margin: 10px 0px 0px 0px;
                font-size: 17px;
                font-weight: 600;
                text-align: center;
            }

            .bem-vindo h2 span {
                font-size: 16px;
                font-weight: 850;
                letter-spacing: 0.5px;
            }

            /* - NAVGATION - */
            
            .navgation {
                width: 100vw;
                height: 80px;
                border-radius: 20px 20px 0px 0px;
                box-shadow: 0px -5px 10px var(--gray);
                display: flex;
                justify-content: space-around;
                align-items: center;
                position: fixed;
                bottom: 0px;
            }

            .navgation ion-icon {
                font-size: 30px;
                color: var(--one);
                cursor: pointer;
            }

            #criar {
                font-size: 32px;
                background: var(--one);
                border-radius: 50%;
                color: white;
                padding: 5px;
                box-shadow: 0px 0px 10px var(--one);
            }
            
            /* SELECIONADO */

            .selecionado {
                color: var(--two);
            }
            
            </style>
           </head>
           
           <body>
            
                <main class="container">

                    <header class="bem-vindo">
                        
                        <ion-icon name="school-outline"></ion-icon>
                        <h1>Ola, <p id="mostrarResponsavel"></p></h1>
                        <h2>Bem Vindo(a) ao aplicativo da escola
                        <br><span>Leticia de Godoy Bueno de Carvalho Lopes</span></h2>
                    
                    </header>


                </main>
           	
                <nav class="navgation">

                    <ion-icon onclick="home()" id="home" class="selecionado" name="home"></ion-icon>
                    <ion-icon name="notifications"></ion-icon>
                    <ion-icon id="criar" name="add"></ion-icon>
                    <ion-icon name="call"></ion-icon>
                    <ion-icon onclick="perfil()" name="person"></ion-icon>

                </nav>


            </body>
           
       <!-- JavaScript -->
       <script>
       
       // Header Nome
       const mostrarResponsavel = document.getElementById('mostrarResponsavel');
       const responsavel = localStorage.getItem('responsavel');
       mostrarResponsavel.textContent = responsavel;


       // HREF
       function perfil() {
        window.location.href = "./perfil.html";
       }

       function home() {
        window.location.href = "./home.html";
       }

       // Funcao de Abrir o Container AVISO
       const containerAviso = document.querySelector('.containerAviso');
       const containerMensagem = document.querySelector('.containerMensagem');
       
       var c=0;
       function openAviso() {
       	if (c === 1) {
       		CLOSEMENU();
	       	containerAviso.style.top = "100vh";
	       	setTimeout(() => {
	       		containerAviso.style.display = "none";
	       	}, 350);
	       	c=0;
       	} else {
	       	CLOSEMENU();
	       	containerAviso.style.display = "flex";
	       	setTimeout(() => {
	       		containerAviso.style.top = "150px";
	       	}, 350);
	       	c++;
       	}
       }
       
       var c=0;
       function openMensagem() {
       	if (c === 1) {
       		CLOSEMENU();
	       	containerMensagem.style.top = "100vh";
	       	setTimeout(() => {
	       		containerMensagem.style.display = "none";
	       	}, 350);
	       	c=0;
       	} else {
	       	CLOSEMENU();
	       	containerMensagem.style.display = "flex";
	       	setTimeout(() => {
	       		containerMensagem.style.top = "150px";
	       	}, 350);
	       	c++;
       	}
       }
       
       
       
       
      // Navgation
       const openMenu = document.getElementById('openMenu');
       const closeMenu = document.getElementById('closeMenu');
       const menu = document.querySelector('.menu');
       // Abrir Menu
       openMenu.addEventListener('click', () => {
       	OPENMENU();
       });
       closeMenu.addEventListener('click', () => {
       	CLOSEMENU();
       });
       
       function OPENMENU() {
       	openMenu.style.display = "none";
       	closeMenu.style.display = "block";
       	menu.style.left = "0px";
       }
       
       function CLOSEMENU() {
       	openMenu.style.display = "block";
       	closeMenu.style.display = "none";
       	menu.style.left = "-51vw";
       }
       
       
       // VERIFICAR SE E ADMINISTRADOR
      const h1logado = document.getElementById('logado');
      const logado = localStorage.getItem('logado');
      const btnAviso = document.getElementById('btn-aviso');
      const btnMensagem = document.getElementById('btn-mensagem');
      
        
       if (logado === "ADMIN") {
       	h1logado.innerHTML = "Administrador";
       	btnAviso.style.display = "flex";
       	btnMensagem.style.display = "flex";
       } else if (logado === "RESPONSAVEL") {
       	h1logado.innerHTML = "Responsavel";
       } else if (!logado) {
       	window.location.href = "./login.html";
       }
       
       
       
       const alertaNome = document.getElementById('alertaNome');
       function inputaluno() {
     const aluno = document.getElementById('aluno').value;
     document.getElementById('aluno').value = aluno.toUpperCase();
     fetch("https://app-leticia.netlify.app/src/apis/dados.json").then((response) => {
        response.json().then((dados) => {
            let nomeEncontrado = false;
	    let serie = "";

            dados.usuarios.forEach((usuario) => {
                if (usuario.nome === aluno) {
                    nomeEncontrado = true;
		    usuario.aluno.map((dado) => {
			serie = dado.serie;
		    });
                }
            });

            if (nomeEncontrado) {
                alertaNome.innerHTML = `Valido ${serie}`;
                alertaNome.style.color = "green";
            } else {
                alertaNome.innerHTML = "Invalido";
                alertaNome.style.color = "red";
            }
        });
     });
}
      
      // FUNCAO PARA ABRIR (CERTO E ERRADO)
      
      const certo = document.querySelector('.certo');
      const errado = document.querySelector('.errado');
      
      function openCerto() {
      	certo.style.display = "flex";
      }
      
      function closeCerto() {
      	location.reload();
      }
      
      function openErrado() {
      	errado.style.display = "flex";
      }
      
      function closeErrado() {
      	location.reload();
      }
      
       </script>
       
       
       
       
       
       <!-- LINKS DO BANCO DE DADOS -->
       <script src="https://www.gstatic.com/firebasejs/10.3.0/firebase-app-compat.js"></script>
	   <script src="https://www.gstatic.com/firebasejs/10.3.0/firebase-firestore-compat.js"></script>
       
       <!------------------------------->
       <!-- BANCO DE DADOS (FIREBASE) -->
       <!------------------------------->
       
       <script>
       
       const firebaseConfig = {
	    apiKey: "AIzaSyA4cOoq5HzXl8Exbx3zZJb_4MBj7pbDJSU",
	    authDomain: "escola-leticia.firebaseapp.com",
	    projectId: "escola-leticia",
	    storageBucket: "escola-leticia.appspot.com",
	    messagingSenderId: "782148597563",
	    appId: "1:782148597563:web:d31d9ecb10790855bb691e"
	  };
	
	  firebase.initializeApp(firebaseConfig);
	  const db = firebase.firestore();
	  
	  // Enviar AVISO
	  function enviarAviso() {
	  	const titulo = document.getElementById('titulo').value;
	  	const texto = document.getElementById('texto').value;
	  	db.collection("avisos").add({
	  		titulo: titulo,
	  		texto: texto
	  	})
	  	openAviso();
	  	setTimeout(() => {
	  		openCerto();
	  	}, 350);
	  }
	  
	  // Enviar MENSAGEM
	  function enviarMensagem() {
	  	const aluno = document.getElementById('aluno').value;
	  	const motivo = document.getElementById('motivo').value;
	  	const mensagem = document.getElementById('mensagem').value;
	  	db.collection("mensagens").add({
	  		aluno: aluno,
	  		motivo: motivo,
	  		mensagem: mensagem
	  	})
		openMensagem();
	  	setTimeout(() => {
	  		openCerto();
	  	}, 350);
	  }
	  
	  const containerMensagens = document.getElementById('containerMensagens');
	  const containerMensagensTwo = document.getElementById('containerMensagens2');
	  
	  
	  // LER AVISOS E MENSAGENS DA SECRETARIA
	  db.collection("avisos").onSnapshot((data) => {
	  	data.docs.map((val) => {
	  		containerMensagens.innerHTML += `
	  		<div id="divMensagens">
	  			<h1>${val.data().titulo}</h1>
	  			<h2>${val.data().texto}</h2>
	  		</div>
	  		`;
	  	})
	  })
	  
	  const alunoLocal = localStorage.getItem('nome');
	  
	  db.collection("mensagens").onSnapshot((data) => {
	  	data.docs.map((val) => {
	  		if(val.data().aluno === alunoLocal) {
	  			containerMensagensTwo.innerHTML += `
	  			<div id="divMensagens2">
	  				<h1><ion-icon name="person-circle-outline"></ion-icon>Mensagem da Secretaria</h1>
		  			<h2>${val.data().motivo}</h2>
		  			<h3>${val.data().mensagem}</h3>
		  		</div>
	  			`;
	  		}
	  	})
	  })
	  
       
       </script>
       
       
       
       <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
	<script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>

</html>
