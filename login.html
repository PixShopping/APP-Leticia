<!DOCTYPE html>
<html lang="pt-BR">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link rel="icon" href="./imagem/icon.png" type="x-icon">
		<link type="stylesheet" src="./style.css">
		<title> Let√≠cia | Login </title>
		      
		<style scoped>

			:root {
				/* Cores do aplicativo */
				--one: #002242;
				--two: #144774;
				--tree: #336FA5;
				--four: #4E8BB8;
				--five: #6FADD2;
				--six: #9ECAE3;
				--green: green;
				--red: red;
			}
			
			*  {
				padding: 0px;
				margin: 0px;
				box-sizing: border-box;
			}
			
			body {
				background: white;
				color: var(--one);
				user-select: none;
				font-family: 'Arial';
				overflow-x: hidden;
				transition: all .4s ease-in-out;
            }
            
            .container {
            	width: 100vw;
            	height: 90vw;
            }
            
            /* LOGO */
            .logo {
            	width: 100%;
            	height: 60vh;
            	background: var(--one);
            	color: white;
            	border-radius: 0px 0px 25px 25px;
            	display: flex;
            	flex-direction: column;
            	align-items: center;
            	justify-content: center;
            }
            
            .logo h1 {
            	font-size: 28px;
            	font-weight: 900;
            	letter-spacing: 0.8px;
            	
            }
            
            .content-logo {
            	display: flex;
            	flex-direction: column;
            	align-items: center;
            	justify-content: center;
            }
            
            .content-logo img {
            	width: 385px;
            	height: 385px;
            }
            
            /* BOTOES */
            .botoes {
            	width: 100vw;
            	height: 30vh;
            	background: white;
            	display: flex;
            	flex-direction: column;
            	align-items: center;
            	justify-content: center;
            }
            
            .botoes button, .content-logar button, .content-cadastrar button {
            	width: 90%;
            	height: 50px;
            	background: var(--one);
            	color: white;
            	margin: 0px 0px 25px 0px;
            	border-radius: 10px;
            	font-size: 17px;
            	font-weight: 750;
            	letter-spacing: 0.5px;
            	cursor: pointer;
            }
            
            .botoes button:hover, .content-logar button:hover, .content-cadastrar button:hover {
            	background: white;
            	border: 3px solid var(--one);
            	color: var(--one);
            	transition: all .4s ease-in-out;
            	box-shadow: 0px 0px 15px var(--one);
            }
            
            .botoes a {
            	font-size: 20px;
            	font-weight: 800;
            	letter-spacing: 0.5px;
            	color: var(--one);
            	cursor: pointer;
            }
            
            .botoes a:hover {
            	text-shadow: 0px 0px 15px var(--one);
            	transition: all .4s ease-in-out;
            }
            
            /* CONTENT-LOGAR E CONTENT-CADASTRAR*/
            .content-logar, .content-cadastrar {
            	display: none;
            	flex-direction: column;
            	align-items: center;
            	width: 100%;
            	height: auto;
            	border-radius: 25px 25px 0px 0px;
            	background: white;
            	margin: -20px 0px 0px 0px;
            	padding: 10px 0px 25px 0px;
            }
            
            .form {
            	width: auto;
            	height: auto;
            	display: flex;
            	flex-direction: column;
            	align-items: center;
            	margin: 30px 0px 0px 0px;
            }
            
            .content-logar label, .content-cadastrar label {
            	font-size: 19px;
            	font-weight: 500;
            	letter-spacing: 0.4px;
            	color: var(--one);
            	align-self: start;
            	margin: 15px 0px 4px 4px;
            	display: flex;
            }
            
            .content-logar label p, .content-cadastrar label p {
            	margin: 0px 0px 0px 8px;
            	font-weight: 700;
            }
            
            .content-logar input, .content-cadastrar input, .content-cadastrar select {
            	width: 90vw;
            	height: 45px;
            	border: 2px solid var(--one);
            	border-radius: 10px;
            	outline: none;
            	background: transparent;
            	padding: 0px 0px 0px 15px;
            	color: var(--one);
            	font-size: 18px;
            	font-weight: 800;
            	letter-spacing: 0.2px;
            }
            
            .content-logar button, .content-cadastrar button {
            	position: absolute;
		left: 50%;
		bottom: 50px;
		transform: translateX(-50%);
		width: 85%;
            	height: 50px;
		
            }
            
            #voltar {
            	display: none;
            	position: absolute;
            	top: 20px;
            	left: 20px;
            	font-size: 33px;
            	background: white;
            	color: var(--one);
            	border-radius: 10px;
            	padding: 7px;
            	cursor: pointer;
            } #voltar:hover {
            	background: white;
            	color: var(--two);
            	box-shadow: 0px 0px 10px white;
            	transition: all .3s ease-in-out;
            }
            
            /* Verificacao h1 e h2 */
            
            .verificacao {
            	width: 90%;
            	display: flex;
            	flex-direction: column;
            	align-items: flex-start;
            	padding: 0px 0px 0px 3px;
            }
            
            .verificacao h1 {
            	font-size: 21px;
            	font-weight: 800;
            	letter-spacing: 0.2px;
            	color: var(--two);
            	margin: 20px 0px 0px 0px;
            }
            
            .verificacao h2 {
            	font-size: 21px;
            	font-weight: 800;
            	letter-spacing: 0.2px;
            	color: var(--two);
            	margin: 5px 0px 0px 0px;
            }
            
            </style>
           </head>
           
           <body>
       	
       		<main class="container">
       			
       			<section class="logo">
       				<h1></h1>
       				<ion-icon onclick="voltar()" id="voltar" name="arrow-back"></ion-icon>
       				<div class="content-logo">
	       				<img alt="Logo da escola" src="./src/img/logo.png" />
       				</div>
       			</section>
       		
       			<section class="botoes">
       				<button onclick="cadastrar()">Cadastrar</button>
       				<a onclick="logar()">Logar</a>
       			</section>
       			
       			<section class="content-logar">
       				
       				<div class="form">
	       				<label>Nome do Responsavel
	       				<p id="alertaLoginRESPONSAVEL"></p>
	       				</label>
	       				<input oninput="inputResponsavel()" id="responsavel" type="text">
	       				
	       				<label>Senha
	       				<p id="alertaLoginSENHA"></p>
	       				</label>
	       				<input id="senha" type="password">	
       				</div>
       				
       				<div class="verificacao">
	       				<h1></h1>
	       				<h2></h2>
       				</div>
       				
       				<button onclick="enviarLogin()">Logar</button>
       				
       			</section>
       			
       			<section class="content-cadastrar">
       				
       				<div class="form">
	       				<label>Nome do Responsavel
	       				<p id="alertaRESPONSAVEL"></p>
	       				</label>
	       				<input oninput="verificarResponsavel()" id="cadastroResponsavel" type="text">
	       				
	       				<label>Nome do Aluno
	       				<p id="alertaALUNO"></p>
	       				</label>
	       				<input id="cadastroAluno" type="text">
	       				
	       				<label>Serie:
	       				<p id="alertaSERIE"></p>
	       				</label>
	       				<select id="cadastroSerie">
	       					<option value="6A">6anoA</option>
	       					<option value="6B">6anoB</option>
	       					<option value="7A">7anoA</option>
	       					<option value="7B">7anoB</option>
	       					<option value="8A">8anoA</option>
	       					<option value="8B">8anoB</option>
	       					<option value="9A">9anoA</option>
	       					<option value="9B">9anoB</option>
	       				</select>
	       				
	       				<label>Telefone / Gmail
	       				<p id="alertaGMAIL"></p>
	       				</label>
	       				<input placeholder="opcional" id="cadastroGmail" type="text">
	       				
	       				<label>Senha
	       				<p id="alertaSENHA"></p>
	       				</label>
	       				<input id="cadastroSenha" type="password">	
       				</div>
       				
       				<button onclick="enviarCadastro()">Cadastrar</button>
       				
       				
       			</section>
       			
       		</main>
           	
           </body>
           
       <!-- JavaScript -->
     <script>
     
     // ===== LOGAR =====
     function logar() {
     	// Transicao da LOGO
     	const logo = document.querySelector('.logo');
     	const voltar = document.getElementById('voltar');
     	const h1logo = document.querySelector('.logo h1');
     	const contentLogo = document.querySelector('.content-logo');
     	voltar.style.display = "flex";
     	logo.style.height = "30vh";
     	logo.style.borderRadius = "0px";
     	contentLogo.style.display = "none";
     	h1logo.innerHTML = "Logar";
     	
     	// Transicao dos BOTOES
     	const botoes = document.querySelector('.botoes');
     	botoes.style.display = "none";
     	
     	// Transicao do LOGAR
     	const contentLogar = document.querySelector('.content-logar');
     	contentLogar.style.display = "flex";
     }
     
     // ===== CADASTRAR =====
     function cadastrar() {
     	// Transicao da LOGO
     	const logo = document.querySelector('.logo');
     	const voltar = document.getElementById('voltar');
     	const h1logo = document.querySelector('.logo h1');
     	const contentLogo = document.querySelector('.content-logo');
     	voltar.style.display = "flex";
     	logo.style.height = "30vh";
     	logo.style.borderRadius = "0px";
     	contentLogo.style.display = "none";
     	h1logo.innerHTML = "Cadastrar";
     	
     	// Transicao dos BOTOES
     	const botoes = document.querySelector('.botoes');
     	botoes.style.display = "none";
     	
     	// Transicao do LOGAR
     	const contentCadastrar = document.querySelector('.content-cadastrar');
     	contentCadastrar.style.display = "flex";
     }
     
     function voltar() {
     	location.reload();
     }
     
     
     // Verificar Responsavel Existente
     
     function inputResponsavel() {
  		const verificacaoh1 = document.querySelector('.verificacao h1');
	 	const verificacaoh2 = document.querySelector('.verificacao h2');
                const RESPONSAVEL = document.getElementById('responsavel').value;

	        db.collection("cadastro")
	 	.doc("responsaveis")
	 	.collection(RESPONSAVEL)
	 	.get()
	 	.then((existe) => {
	 		if(existe.size > 0) {
				db.colletion("responsaveis").onSnapshot((data) => {
				  data.docs.map((val) => {
					verificacaoh1.innerHTML = `Nome: ${val.data().aluno}`;
					verificacaoh2.innerHTML = `Nome: ${val.data().serie}`;
				  })
				})
	 		}
	 	})
     }
     
     var continuar = true;
     function verificarResponsavel() {
     	const RESPONSAVEL = document.getElementById('cadastroResponsavel').value;
	 const alertaRESPONSAVEL = document.getElementById('alertaRESPONSAVEL');
	 	
	 	db.collection("cadastro")
	 	.doc("responsaveis")
	 	.collection(RESPONSAVEL)
	 	.get()
	 	.then((existe) => {
	 		if(existe.size > 0) {
	 			alertaRESPONSAVEL.innerHTML = "Ja Existe!";
	 			alertaRESPONSAVEL.style.color = "var(--red)";
	 			continuar = false;
	 		} else {
	 			alertaRESPONSAVEL.innerHTML = "Valido";
	 			alertaRESPONSAVEL.style.color = "var(--green)";
				continuar = true;
	 		}
	 	})
     }
     
     </script>
     
     
     
     <!-- LINKS DO BANCO DE DADOS -->
       <script src="https://www.gstatic.com/firebasejs/10.3.0/firebase-app-compat.js"></script>
	   <script src="https://www.gstatic.com/firebasejs/10.3.0/firebase-firestore-compat.js"></script>
       
       <!------------------------------->
       <!-- BANCO DE DADOS (FIREBASE) -->
       <!------------------------------->
       
       <script>
       
       const firebaseConfig = {
	    apiKey: "AIzaSyA4cOoq5HzXl8Exbx3zZJb_4MBj7pbDJSU",
	    authDomain: "escola-leticia.firebaseapp.com",
	    projectId: "escola-leticia",
	    storageBucket: "escola-leticia.appspot.com",
	    messagingSenderId: "782148597563",
	    appId: "1:782148597563:web:d31d9ecb10790855bb691e"
	  };
	
	  firebase.initializeApp(firebaseConfig);
	  const db = firebase.firestore();
	  
	  // Cadastro
	  function enviarCadastro() {
	  	const RESPONSAVEL = document.getElementById('cadastroResponsavel').value;
	  	const ALUNO = document.getElementById('cadastroAluno').value;
	  	const GMAIL = document.getElementById('cadastroGmail').value;
	  	const SERIE = document.getElementById('cadastroSerie').value;
	  	const SENHA = document.getElementById('cadastroSenha').value;
	  	const alertaRESPONSAVEL = document.getElementById('alertaRESPONSAVEL');
	  	const alertaALUNO = document.getElementById('alertaALUNO');
	  	const alertaSERIE = document.getElementById('alertaSERIE');
	  	const alertaSENHA = document.getElementById('alertaSENHA');
	  	
	  	
	  	// Colecao Cadastro
	  	if (continuar) {
		   db.collection("cadastro")
			  .doc("responsaveis")
			  .collection(RESPONSAVEL)
			  .add({
				responsavel: RESPONSAVEL,
			  	aluno: ALUNO,
			  	serie: SERIE,
			  	gmail: GMAIL,
			  	senha: SENHA
			  });
			  
		  setTimeout(() => {
		    location.reload();
		  }, 850);
		}
	  }
	  
	  // Login
	  function enviarLogin() {
	  
	  	const RESPONSAVEL = document.getElementById('responsavel').value;
	  	const SENHA = document.getElementById('senha').value;
	  	const alertaRESPONSAVEL = document.getElementById('alertaLoginRESPONSAVEL');
	  	const alertaSENHA = document.getElementById('alertaLoginSENHA');
	  	
	  	
	  	db.collection("cadastro")
			.doc("responsaveis")
			.collection(RESPONSAVEL)
			.get()
			.then((existe) => {
	  		 if(existe.size > 0) {
	  			 alertaRESPONSAVEL.innerHTML = "Valido";
	 			 alertaRESPONSAVEL.style.color = "green";
	 			 
	 			 db.collection("cadastro")
					 .doc("responsaveis")
					 .collection(RESPONSAVEL)
					 .onSnapshot((data) => {
		  			data.docs.map((val) => {
	  			
		  			// Verificar SENHA
		  			if(SENHA === val.data().senha) {
		  				alertaSENHA.innerHTML = "Valido";
		  				alertaSENHA.style.color = "green";
		  			} else {
		  				alertaSENHA.innerHTML = "Invalido";
		  				alertaSENHA.style.color = "red";
		  			}
		  			
		  			if (val.data().senha === SENHA) {
		  				setTimeout(() => {
		  					localStorage.setItem('logado', 'RESPONSAVEL');
		  					// Dados do Responsavel
		  					if(val.data().responsavel !== "") {
		  					localStorage.setItem('responsavel', val.data().responsavel);
		  					} if(val.data().aluno !== "") {
		  						localStorage.setItem('aluno', val.data().aluno);
		  					} if(val.data().serie !== "") {
		  						localStorage.setItem('serie', val.data().serie);
		  					} if(val.data().gmail !== "") {
		  						localStorage.setItem('gmail', val.data().gmail);
		  					} if(val.data().senha !== "") {
		  						localStorage.setItem('senha', val.data().senha);
		  					}
		  					window.location.href = "./home.html";
		  				}, 400);
		  			} else if (RESPONSAVEL === "Leticia" && SENHA === "123") {
		  				localStorage.setItem('logado', 'ADMIN');
	  					window.location.href = "./home.html";
		  			}
		  			
		  		});
		  	});
		  	
	 		 } else {
		  		alertaRESPONSAVEL.innerHTML = "Invalido";
				alertaRESPONSAVEL.style.color = "red";
		  	}
	  	})
	  		
	  		
	  		
	  	
	  }
	  
	  </script>
     
       
	<script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
	<script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>

</html>
